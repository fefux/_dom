var _dom=function(){var e="__dom",t={},n=function(e,t,n){var r;this.tagName=e,this.constructor=t,this.cssRules=typeof n=="function"?n:typeof n=="object"?function(){return n}:0,this.getRules=function(e){return this.cssRules&&!r&&(r=_dom.rules(this.cssRules())),r}};return n.prototype.build=function(t){var n=this.instance(t);return Object.defineProperty(n.dom,e,{get:function(){return n},configurable:!0}),n.dom},n.prototype.instance=function(e){return new n.Instance(this,e)},n.Instance=function(t,n){var r=t.constructor.apply(this,n);if(!(r instanceof HTMLElement))throw console.error("-----------------------"),console.log("tagName=",t.tagName),console.log("constructor=",t.constructor),console.log("this.dom=",r),"\n_dom.model Error:\nconstructor must return an HTMLElement.";r[e]&&(this._super=r[e]),Object.defineProperty(this,"tagName",{get:function(){return t.tagName}}),"dom"in this||Object.defineProperty(this,"dom",{get:function(){return r}});if(t.cssRules){var i=t.getRules();Object.defineProperty(this,"rules",{get:function(){return i}})}},_dom=function(e,n,r,i){var s=arguments;if(e in t)return t[e].build(s);try{var o=typeof i=="string"?document.createElementNS(i,e):document.createElement(e),u=function(e,t,n){if(typeof e=="undefined")throw"property '"+n+"' doesn't exist.";for(var r in t)typeof t[r]=="object"?u(e[r],t[r],n+"."+r):e[r]=t[r]};u(o,n,(""+e).toUpperCase());if(r&&typeof r.length=="number")for(var a=0;a<r.length;a++)if(typeof r[a]=="string")o.appendChild(document.createTextNode(r[a]));else try{o.appendChild(r[a])}catch(f){throw console.error("-----------------------"),console.log("childs["+a+"]=",r[a]),console.log("error=",f),"parameter childs["+a+"] must be string or dom element."}}catch(l){throw console.error("----------_dom Error"),console.log("arguments=",s),console.log("error=",l),"_dom Error:\n"+l+""}return o},_dom.model=function(e,r,i){e.indexOf("-")===-1&&console.warn('_dom.model suspect tagName "'+e+'" should contain at least one "-" to avoid conflict with natives HTMLElements.');if(e in t)throw'\n_dom.model Error:\ntagName "'+e+'" allready exists.';if(typeof r!="function")throw console.error("----------_dom.model Error"),console.log("tagName=",e),console.log("constructor=",r),"\n_dom.model Error:\nconstructor must be a function.";t[e]=new n(e,r,i)},_dom.instance=function(e,n){if(e in t)return t[e].instance(arguments);throw console.error("----------_dom.instance Error"),console.log("arguments=",arguments),'\n_dom.instance Error:\ntagName "'+e+'" not found in models.'},_dom.rule=function(e,t){if(typeof e!="string"||!e.length)throw console.error("----------_dom.rule Error"),console.log("selector=",e),"\n_dom.rule Error:\nselector is not a valid css query.";if(document.styleSheets.length==0){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.documentElement.appendChild(n)}var r=document.styleSheets[document.styleSheets.length-1];r.insertRule(e+"{\n\n}",r.cssRules.length);var i=r.cssRules[r.cssRules.length-1];if(t)for(var s in t)i.style[s]=t[s];return i},_dom.rules=function(e){var t={},n={},r=function(e,n,i,s){var o,u,a;if(n.charAt(0)==="$")s[n]=e+"";else{u=r.level(e,s),u.alias&&(o=u.alias,delete u.alias),a=n.split(",");for(var f=0;f<a.length;f++){var l=i.join("")+a[f];t[l]=_dom.rule(l,u),o&&f===0&&(t[o]=t[l]),r.childs(e,i.concat([a[f]]),s)}}};r.level=function(e,t){var n={},r;for(var i in e)i.charAt(0)!=="&"&&(r=e[i]+"",Object.keys(t).map(function(e){r=r.split(" ").map(function(n){return n.indexOf(e)>-1?t[e]:n}).join(" ")}),n[i]=r);return n},r.childs=function(e,t,n){var i={};for(var s in e)s.charAt(0)==="&"&&r(e[s],s.substr(1),t,Object.assign({},n))};for(var i in e)r(e[i],i,[],n);return t},_dom.classNames=function(e){if(e instanceof HTMLElement)return e.className&&e.className.length?e.className.split(/[ \t]+/i):[];throw console.error("----------_dom.classNames Error"),console.log("element=",e),"\n_dom.classNames Error:\nelement is not an HTMLElement."},_dom.hasClass=function(e,t){try{return _dom.classNames(e).indexOf(t)>-1}catch(n){throw"\n_dom.hasClass Error from:\n"+n}},_dom.addClass=function(e,t){var n;try{n=_dom.classNames(e)}catch(r){throw"\n_dom.addClass Error from:\n"+r}if(typeof t=="string"&&t.length&&n.indexOf(t)===-1)return n.push(t),e.className=n.join(" "),!0},_dom.removeClass=function(e,t){var n,r;try{n=_dom.classNames(e)}catch(i){throw"\n_dom.removeClass Error from:\n"+i}if((r=n.indexOf(t))>-1)return n.splice(r,1),e.className=n.join(" "),!0},_dom.swapClass=function(e,t,n){_dom.removeClass(e,n),_dom.addClass(e,t)},_dom}()