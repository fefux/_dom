var _dom=function(){if(window._dom)return window._dom;var e="__dom",t={},n=function(e,t,n){var i;this.tagName=e,this.constructor=t,this.cssRules=typeof n=="function"?n:typeof n=="object"?function(){return n}:0,this.getRules=function(e){return this.cssRules&&!i&&(i=r.rules(this.cssRules())),i}};n.prototype.build=function(t){var n=this.instance(t);return Object.defineProperty(n.dom,e,{get:function(){return n},configurable:!0}),n.dom},n.prototype.instance=function(e){return new n.Instance(this,e)},n.Instance=function(t,n){var r=t.constructor.apply(this,n);if(!(r instanceof HTMLElement))throw console.error("-----------------------"),console.log("tagName=",t.tagName),console.log("constructor=",t.constructor),console.log("this.dom=",r),"\n_dom.model Error:\nconstructor must return an HTMLElement.";r[e]&&(this._super=r[e]),Object.defineProperty(this,"tagName",{get:function(){return t.tagName}}),"dom"in this||Object.defineProperty(this,"dom",{get:function(){return r}});if(t.cssRules){var i=t.getRules();Object.defineProperty(this,"rules",{get:function(){return i}})}};var r=function(e,n,r,i){var s=arguments;if(e in t)return t[e].build(s);try{var o=typeof i=="string"?document.createElementNS(i,e):document.createElement(e);!r&&n instanceof Array&&(r=n,n={});var u=function(e,t,n){if(typeof e=="undefined")throw"property '"+n+"' doesn't exist.";for(var r in t)typeof t[r]=="object"?u(e[r],t[r],n+"."+r):e[r]=t[r]};u(o,n,(""+e).toUpperCase());if(r&&typeof r.length=="number")for(var a=0;a<r.length;a++)if(typeof r[a]=="string")o.appendChild(document.createTextNode(r[a]));else try{o.appendChild(r[a])}catch(f){throw console.error("-----------------------"),console.log("childs["+a+"]=",r[a]),console.log("error=",f),"parameter childs["+a+"] must be string or dom element."}}catch(l){throw console.error("----------_dom Error"),console.log("arguments=",s),console.log("error=",l),"_dom Error:\n"+l+""}return o};return r.model=function(e,r,i){e.indexOf("-")===-1&&console.warn('_dom.model suspect tagName "'+e+'" should contain at least one "-" to avoid conflict with natives HTMLElements.');if(e in t)throw'\n_dom.model Error:\ntagName "'+e+'" allready exists.';if(typeof r!="function")throw console.error("----------_dom.model Error"),console.log("tagName=",e),console.log("constructor=",r),"\n_dom.model Error:\nconstructor must be a function.";t[e]=new n(e,r,i)},r.instance=function(e,n){if(e in t)return t[e].instance(arguments);throw console.error("----------_dom.instance Error"),console.log("arguments=",arguments),'\n_dom.instance Error:\ntagName "'+e+'" not found in models.'},r.rule=function(e,t){if(typeof e!="string"||!e.length)throw console.error("----------_dom.rule Error"),console.log("selector=",e),"\n_dom.rule Error:\nselector is not a valid css query.";if(document.styleSheets.length==0){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.documentElement.appendChild(n)}var r=document.styleSheets[document.styleSheets.length-1];r.insertRule(e+"{\n\n}",r.cssRules.length);var i=r.cssRules[r.cssRules.length-1];if(t)for(var s in t)i.style[s]=t[s];return i},r.rules=function(e){var t={},n={},i=function(e,n,s,o){var u,a,f;if(n.charAt(0)==="$")o[n]=e+"";else{a=i.level(e,o),a.alias&&(u=a.alias,delete a.alias),f=n.split(",");for(var l=0;l<f.length;l++){var c=s.join("")+f[l];t[c]=r.rule(c,a),u&&l===0&&(t[u]=t[c]),i.childs(e,s.concat([f[l]]),o)}}};i.level=function(e,t){var n={},r;for(var i in e)i.charAt(0)!=="&"&&(r=e[i]+"",Object.keys(t).forEach(function(e){r=r.indexOf(e)>-1?r.split(e).join(t[e]):r}),n[i]=r);return n},i.childs=function(e,t,n){var r={};for(var s in e)s.charAt(0)==="&"&&i(e[s],s.substr(1),t,Object.assign({},n))};for(var s in e)i(e[s],s,[],n);return t},r.classNames=function(e){if(e instanceof HTMLElement)return e.className&&e.className.length?e.className.split(/[ \t]+/i):[];throw console.error("----------_dom.classNames Error"),console.log("element=",e),"\n_dom.classNames Error:\nelement is not an HTMLElement."},r.hasClass=function(e,t){try{return r.classNames(e).indexOf(t)>-1}catch(n){throw"\n_dom.hasClass Error from:\n"+n}},r.addClass=function(e,t){var n;try{n=r.classNames(e)}catch(i){throw"\n_dom.addClass Error from:\n"+i}if(typeof t=="string"&&t.length&&n.indexOf(t)===-1)return n.push(t),e.className=n.join(" "),!0},r.removeClass=function(e,t){var n,i;try{n=r.classNames(e)}catch(s){throw"\n_dom.removeClass Error from:\n"+s}if((i=n.indexOf(t))>-1)return n.splice(i,1),e.className=n.join(" "),!0},r.swapClass=function(e,t,n){r.removeClass(e,n),r.addClass(e,t)},r}()