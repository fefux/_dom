var _dom=function(){if(window._dom)return window._dom;var e="__dom",t={},o=function(e,t,o){var r;this.tagName=e,this.constructor=t,this.cssRules="function"==typeof o?o:"object"==typeof o?function(){return o}:0,this.getRules=function(e){return this.cssRules&&!r&&(r=n.rules(this.cssRules())),r}};o.prototype.build=function(t){var o=this.instance(t);return Object.defineProperty(o.dom,e,{get:function(){return o},configurable:!0}),o.dom},o.prototype.instance=function(e){return new o.Instance(this,e)},o.Instance=function(e,t){var o=e.constructor.apply(this,t);if(!(o instanceof HTMLElement))throw console.error("-----------------------"),console.log("tagName=",e.tagName),console.log("constructor=",e.constructor),console.log("this.dom=",o),"\n_dom.model Error:\nconstructor must return an HTMLElement.";if(o.__dom&&(this._super=o.__dom),Object.defineProperty(this,"tagName",{get:function(){return e.tagName}}),"dom"in this||Object.defineProperty(this,"dom",{get:function(){return o}}),e.cssRules){var n=e.getRules();Object.defineProperty(this,"rules",{get:function(){return n}})}};var n=function(e,o,n,r){var s=arguments;if(e in t)return t[e].build(s);try{var a="string"==typeof r?document.createElementNS(r,e):document.createElement(e);!n&&o instanceof Array&&(n=o,o={});var l=function(e,t,o){if(void 0===e)throw"property '"+o+"' doesn't exist.";for(var n in t)"object"==typeof t[n]?l(e[n],t[n],o+"."+n):e[n]=t[n]};if(l(a,o,(""+e).toUpperCase()),n&&"number"==typeof n.length)for(var c=0;c<n.length;c++)if("string"==typeof n[c])a.appendChild(document.createTextNode(n[c]));else try{a.appendChild(n[c])}catch(e){throw console.error("-----------------------"),console.log("childs["+c+"]=",n[c]),console.log("error=",e),"parameter childs["+c+"] must be string or dom element."}}catch(e){throw console.error("----------_dom Error"),console.log("arguments=",s),console.log("error=",e),"_dom Error:\n"+e}return a};n.model=function(e,r,s,a){if(-1===e.indexOf("-")&&console.warn('_dom.model suspect tagName "'+e+'" should contain at least one "-" to avoid conflict with natives HTMLElements.'),e in t)throw'\n_dom.model Error:\ntagName "'+e+'" allready exists.';if("function"!=typeof r)throw console.error("----------_dom.model Error"),console.log("tagName=",e),console.log("constructor=",r),"\n_dom.model Error:\nconstructor must be a function.";t[e]=new o(e,r,s),a&&n.modelShadow(e)},n.has=function(e){return e in t},n.instance=function(e,o){if(!(e in t))throw console.error("----------_dom.instance Error"),console.log("arguments=",arguments),'\n_dom.instance Error:\ntagName "'+e+'" not found in models.';return t[e].instance(arguments)},n.rule=function(e,t){if("string"!=typeof e||!e.length)throw console.error("----------_dom.rule Error"),console.log("selector=",e),"\n_dom.rule Error:\nselector is not a valid css query.";if(0==document.styleSheets.length){var o=document.createElement("style");o.appendChild(document.createTextNode("")),document.documentElement.appendChild(o)}var n=document.styleSheets[document.styleSheets.length-1];n.insertRule(e+"{\n\n}",n.cssRules.length);var r=n.cssRules[n.cssRules.length-1];if(t)for(var s in t)r.style[s]=t[s];return r},n.rules=function(e){var t={},o={},r=function(e,o,s,a){var l,c,i;if("$"===o.charAt(0))a[o]=e+"";else{(c=r.level(e,a)).alias&&(l=c.alias,delete c.alias),i=o.split(",");for(var u=0;u<i.length;u++){var d=s.join("")+i[u];try{t[d]=n.rule(d,c)}catch(e){console.warn('_dom.rules Error:\nInsertion of rule "'+d+'" failed!')}t[d]&&(l&&0===u&&(t[l]=t[d]),r.childs(e,s.concat([i[u]]),a))}}};for(var s in r.level=function(e,t){var o,n={};for(var r in e)"&"!==r.charAt(0)&&(o=e[r]+"",Object.keys(t).forEach((function(e){o=o.indexOf(e)>-1?o.split(e).join(t[e]):o})),n[r]=o);return n},r.childs=function(e,t,o){for(var n in e)"&"===n.charAt(0)&&r(e[n],n.substr(1),t,Object.assign({},o))},e)r(e[s],s,[],o);return t},n.classNames=function(e){if(e instanceof HTMLElement)return e.className&&e.className.length?e.className.split(/[ \t]+/i):[];throw console.error("----------_dom.classNames Error"),console.log("element=",e),"\n_dom.classNames Error:\nelement is not an HTMLElement."},n.hasClass=function(e,t){try{return n.classNames(e).indexOf(t)>-1}catch(e){throw"\n_dom.hasClass Error from:\n"+e}},n.addClass=function(e,t){var o;try{o=n.classNames(e)}catch(e){throw"\n_dom.addClass Error from:\n"+e}if("string"==typeof t&&t.length&&-1===o.indexOf(t))return o.push(t),e.className=o.join(" "),!0},n.removeClass=function(e,t){var o,r;try{o=n.classNames(e)}catch(e){throw"\n_dom.removeClass Error from:\n"+e}if((r=o.indexOf(t))>-1)return o.splice(r,1),e.className=o.join(" "),!0},n.swapClass=function(e,t,o){n.removeClass(e,o),n.addClass(e,t)};return n.modelShadowed=function(e){return!!t[e].shadow},n.modelShadow=function(e){if(!t[e])throw["","_dom.modelShadow Error:",'argument[0] "tagName"="'+e+'" has no model declared.'].join("\n");{if(n.modelShadowed(e))return;let o=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1)).join(""),r=(t[e].constructor+"").split(")",2)[0].split("(")[1].split(",");class s extends HTMLElement{constructor(){super(),function(e,t,o){let r,s=e.attachShadow({mode:"open"}),a=o.slice(1).map(t=>{let o;if(e.hasAttribute(t)){o=e.getAttribute(t);try{o=JSON.parse(o)}catch(e){}}return o});o=[t].concat(a),console.log("args"),r=n.apply(null,o),s.appendChild(r);let l=[],c=r.__dom.rules;for(let e in c)l.push(c[e].cssText);s.appendChild(n("style",{type:"text/css",textContent:l.join("\n")}))}(this,e,r)}}t[e].shadow={name:o,[o]:class extends s{}},customElements.define(e,t[e].shadow[o])}},n}();